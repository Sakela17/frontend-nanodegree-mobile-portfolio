var stream=require("readable-stream"),duplexer2=require("./"),writable=new stream.Writable({objectMode:!0}),readable=new stream.Readable({objectMode:!0});writable._write=function(a,c,b){if(readable.push(a))return b();readable.once("drain",b)};readable._read=function(a){};writable.once("finish",function(){setTimeout(function(){readable.push(null)},500)});var duplex=duplexer2(writable,readable);duplex.on("data",function(a){console.log("got data",JSON.stringify(a))});duplex.on("finish",function(){console.log("got finish event")});
duplex.on("end",function(){console.log("got end event")});duplex.write("oh, hi there",function(){console.log("finished writing")});duplex.end(function(){console.log("finished ending")});
