var mkdirp=require("../"),path=require("path"),test=require("tap").test,mockfs=require("mock-fs"),_0777=511,_0755=493;
test("opts.fs",function(b){b.plan(5);var a=Math.floor(Math.random()*Math.pow(16,4)).toString(16),e=Math.floor(Math.random()*Math.pow(16,4)).toString(16),f=Math.floor(Math.random()*Math.pow(16,4)).toString(16),c="/beep/boop/"+[a,e,f].join("/"),d=mockfs.fs();mkdirp(c,{fs:d,mode:_0755},function(a){b.ifError(a);d.exists(c,function(a){b.ok(a,"created file");d.stat(c,function(a,c){b.ifError(a);b.equal(c.mode&_0777,_0755);b.ok(c.isDirectory(),"target not a directory")})})})});
