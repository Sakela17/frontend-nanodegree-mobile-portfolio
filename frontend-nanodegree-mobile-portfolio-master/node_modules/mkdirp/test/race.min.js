var mkdirp=require("../").mkdirp,path=require("path"),fs=require("fs"),exists=fs.exists||path.exists,test=require("tap").test,_0777=511,_0755=493;
test("race",function(c){function b(a,b){mkdirp(a,_0755,function(b){c.ifError(b);exists(a,function(b){c.ok(b,"file created");fs.stat(a,function(a,b){c.ifError(a);c.equal(b.mode&_0777,_0755);c.ok(b.isDirectory(),"target not a directory")})})})}c.plan(10);for(var a=["","tmp"],d=0;25>d;d++){var e=Math.floor(Math.random()*Math.pow(16,4)).toString(16);a.push(e)}a=a.join("/");b(a);b(a)});
