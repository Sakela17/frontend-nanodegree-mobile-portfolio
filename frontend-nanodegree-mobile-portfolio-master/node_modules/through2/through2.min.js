var Transform=require("readable-stream/transform"),inherits=require("util").inherits,xtend=require("xtend");function DestroyableTransform(a){Transform.call(this,a);this._destroyed=!1}inherits(DestroyableTransform,Transform);DestroyableTransform.prototype.destroy=function(a){if(!this._destroyed){this._destroyed=!0;var c=this;process.nextTick(function(){a&&c.emit("error",a);c.emit("close")})}};function noop(a,c,b){b(null,a)}
function through2(a){return function(c,b,d){"function"==typeof c&&(d=b,b=c,c={});"function"!=typeof b&&(b=noop);"function"!=typeof d&&(d=null);return a(c,b,d)}}module.exports=through2(function(a,c,b){a=new DestroyableTransform(a);a._transform=c;b&&(a._flush=b);return a});
module.exports.ctor=through2(function(a,c,b){function d(b){if(!(this instanceof d))return new d(b);this.options=xtend(a,b);DestroyableTransform.call(this,this.options)}inherits(d,DestroyableTransform);d.prototype._transform=c;b&&(d.prototype._flush=b);return d});module.exports.obj=through2(function(a,c,b){a=new DestroyableTransform(xtend({objectMode:!0,highWaterMark:16},a));a._transform=c;b&&(a._flush=b);return a});
