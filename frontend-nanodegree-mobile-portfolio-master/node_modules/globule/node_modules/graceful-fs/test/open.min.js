var test=require("tap").test,fs=require("../graceful-fs.js");test("graceful fs is not fs",function(a){a.notEqual(fs,require("fs"));a.end()});test("open an existing file works",function(a){var c=fs._curOpen,e=fs.openSync(__filename,"r");a.equal(fs._curOpen,c+1);fs.closeSync(e);a.equal(fs._curOpen,c);fs.open(__filename,"r",function(d,b){if(d)throw d;a.equal(fs._curOpen,c+1);fs.close(b,function(b){if(b)throw b;a.equal(fs._curOpen,c);a.end()})})});
test("open a non-existing file throws",function(a){var c=fs._curOpen;try{var e=fs.openSync("this file does not exist","r")}catch(b){var d=b}a.ok(d,"should throw");a.notOk(e,"should not get an fd");a.equal(d.code,"ENOENT");a.equal(fs._curOpen,c);fs.open("neither does this file","r",function(b,d){a.ok(b,"should throw");a.notOk(d,"should not get an fd");a.equal(b.code,"ENOENT");a.equal(fs._curOpen,c);a.end()})});
