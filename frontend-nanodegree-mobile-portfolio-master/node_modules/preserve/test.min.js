/*
 preserve <https://github.com/jonschlinkert/preserve>

 Copyright (c) 2014-2015, Jon Schlinkert.
 Licensed under the MIT License
*/
var should=require("should"),tokens=require("./"),re=/<%=\s*[^>]+%>/g,pretty=function(a){return require("js-beautify").html(a,{indent_char:" ",indent_size:2})};
describe("preserve tokens",function(){var a=/__ID.{5}__\n__ID.{5}__\n__ID.{5}__/,b=/<%=\s*[^>]+%>/g;it("should (e.g. shouldn't, but will) mangle tokens in the given string",function(){pretty("<ul><li><%= name %></li></ul>").should.equal("<ul>\n  <li>\n    <%=n ame %>\n  </li>\n</ul>")});it("should preserve tokens in the given string",function(){tokens.after(pretty(tokens.before("<ul><li><%= name %></li></ul>",b))).should.equal("<ul>\n  <li><%= name %></li>\n</ul>")});describe(".before()",function(){it("should replace matches with placeholder tokens:",
function(){tokens.before("<%= a %>\n<%= b %>\n<%= c %>",b).should.match(a)})});describe("tokens.after()",function(){it("should replace placeholder tokens with original values:",function(){var c=tokens.before("<%= a %>\n<%= b %>\n<%= c %>",b);c.should.match(a);tokens.after(c).should.equal("<%= a %>\n<%= b %>\n<%= c %>")})})});
