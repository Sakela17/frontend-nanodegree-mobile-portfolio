module.exports=which;which.sync=whichSync;var isWindows="win32"===process.platform||"cygwin"===process.env.OSTYPE||"msys"===process.env.OSTYPE,path=require("path"),COLON=isWindows?";":":",isexe=require("isexe");function getNotFoundError(a){a=Error("not found: "+a);a.code="ENOENT";return a}
function getPathInfo(a,c){var d=c.colon||COLON,b=c.path||process.env.PATH||"",e=[""],b=b.split(d),f="";isWindows&&(b.unshift(process.cwd()),f=c.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM",e=f.split(d),-1!==a.indexOf(".")&&""!==e[0]&&e.unshift(""));if(a.match(/\//)||isWindows&&a.match(/\\/))b=[""];return{env:b,ext:e,extExe:f}}
function which(a,c,d){"function"===typeof c&&(d=c,c={});var b=getPathInfo(a,c),e=b.env,f=b.ext,m=b.extExe,n=[];(function p(b,k){if(b===k)return c.all&&n.length?d(null,n):d(getNotFoundError(a));var g=e[b];'"'===g.charAt(0)&&'"'===g.slice(-1)&&(g=g.slice(1,-1));var l=path.join(g,a);!g&&/^\.[\\\/]/.test(a)&&(l=a.slice(0,2)+l);(function r(a,e){if(a===e)return p(b+1,k);var g=f[a];isexe(l+g,{pathExt:m},function(b,f){if(!b&&f)if(c.all)n.push(l+g);else return d(null,l+g);return r(a+1,e)})})(0,f.length)})(0,
e.length)}function whichSync(a,c){c=c||{};for(var d=getPathInfo(a,c),b=d.env,e=d.ext,d=d.extExe,f=[],m=0,n=b.length;m<n;m++){var h=b[m];'"'===h.charAt(0)&&'"'===h.slice(-1)&&(h=h.slice(1,-1));var p=path.join(h,a);!h&&/^\.[\\\/]/.test(a)&&(p=a.slice(0,2)+p);for(var h=0,q=e.length;h<q;h++){var k=p+e[h],g;try{if(g=isexe.sync(k,{pathExt:d}))if(c.all)f.push(k);else return k}catch(l){}}}if(c.all&&f.length)return f;throw getNotFoundError(a);};
