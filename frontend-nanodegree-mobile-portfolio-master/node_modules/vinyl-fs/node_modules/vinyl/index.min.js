var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
var path=require("path"),clone=require("clone"),cloneStats=require("clone-stats"),cloneBuffer=require("./lib/cloneBuffer"),isBuffer=require("./lib/isBuffer"),isStream=require("./lib/isStream"),isNull=require("./lib/isNull"),inspectStream=require("./lib/inspectStream"),Stream=require("stream");function File(a){a||(a={});this.history=(a.path?[a.path]:a.history)||[];this.cwd=a.cwd||process.cwd();this.base=a.base||this.cwd;this.stat=a.stat||null;this.contents=a.contents||null}
File.prototype.isBuffer=function(){return isBuffer(this.contents)};File.prototype.isStream=function(){return isStream(this.contents)};File.prototype.isNull=function(){return isNull(this.contents)};File.prototype.isDirectory=function(){return this.isNull()&&this.stat&&this.stat.isDirectory()};
File.prototype.clone=function(a){"boolean"===typeof a?a={deep:a,contents:!0}:a?(a.deep=!0===a.deep,a.contents=!1!==a.contents):a={deep:!1,contents:!0};if(this.isStream()){var b=this.contents.pipe(new Stream.PassThrough);this.contents=this.contents.pipe(new Stream.PassThrough)}else this.isBuffer()&&(b=a.contents?cloneBuffer(this.contents):this.contents);var c=new File({cwd:this.cwd,base:this.base,stat:this.stat?cloneStats(this.stat):null,history:this.history.slice(),contents:b});Object.keys(this).forEach(function(b){"_contents"!==
b&&"stat"!==b&&"history"!==b&&"path"!==b&&"base"!==b&&"cwd"!==b&&(c[b]=a.deep?clone(this[b],!0):this[b])},this);return c};File.prototype.pipe=function(a,b){b||(b={});"undefined"===typeof b.end&&(b.end=!0);if(this.isStream())return this.contents.pipe(a,b);if(this.isBuffer())return b.end?a.end(this.contents):a.write(this.contents),a;b.end&&a.end();return a};
File.prototype.inspect=function(){var a=[],b=this.base&&this.path?this.relative:this.path;b&&a.push('"'+b+'"');this.isBuffer()&&a.push(this.contents.inspect());this.isStream()&&a.push(inspectStream(this.contents));return"<File "+a.join(" ")+">"};Object.defineProperty(File.prototype,"contents",{get:function(){return this._contents},set:function(a){if(!isBuffer(a)&&!isStream(a)&&!isNull(a))throw Error("File.contents can only be a Buffer, a Stream, or null.");this._contents=a}});
Object.defineProperty(File.prototype,"relative",{get:function(){if(!this.base)throw Error("No base specified! Can not get relative.");if(!this.path)throw Error("No path specified! Can not get relative.");return path.relative(this.base,this.path)},set:function(){throw Error("File.relative is generated from the base and path attributes. Do not modify it.");}});
Object.defineProperty(File.prototype,"path",{get:function(){return this.history[this.history.length-1]},set:function(a){if("string"!==typeof a)throw Error("path should be string");a&&a!==this.path&&this.history.push(a)}});module.exports=File;
